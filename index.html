<!doctype html>
<html lang="de">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>67</title>
<style>
  html, body {
    height: 100%;
    margin: 0;
    overflow: hidden;
    background: #000;
  }

  .center {
    height: 100vh;
    display: grid;
    place-items: center;
  }

  .number {
    font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial;
    font-weight: 800;
    line-height: 1;
    font-size: 100vh;
    margin: 0;
    padding: 0;
    user-select: none;
    -webkit-user-select: none;
    text-align: center;
  }

  #overlay {
    position: fixed;
    top: 0;
    left: 0;
    width: 100%;
    height: 100%;
    background: #111;
    color: #fff;
    display: grid;
    place-items: center;
    font-family: sans-serif;
    font-size: 2rem;
    text-align: center;
    cursor: pointer;
    z-index: 9999;
  }
</style>
</head>
<body>
  <div id="overlay">
    Klick irgendwo um alles zu starten!
  </div>

  <div class="center">
    <h1 class="number" id="num">67</h1>
  </div>

  <audio id="bgAudio" src="man-scream.mp3" loop></audio>
  <audio id="bgAudio2" src="six-seven.mp3" loop></audio>

<script>
function hexToRgb(hex){
  hex = hex.replace('#','');
  if(hex.length === 3) hex = hex.split('').map(c => c+c).join('');
  const n = parseInt(hex,16);
  return [(n>>16)&255, (n>>8)&255, n&255];
}
function luminance([r,g,b]){
  const srgb = [r,g,b].map(v => v/255);
  const lin = srgb.map(c => c <= 0.03928 ? c/12.92 : Math.pow((c+0.055)/1.055,2.4));
  return 0.2126*lin[0] + 0.7152*lin[1] + 0.0722*lin[2];
}
function contrastRatio(hex1, hex2){
  const L1 = luminance(hexToRgb(hex1));
  const L2 = luminance(hexToRgb(hex2));
  const lighter = Math.max(L1,L2);
  const darker  = Math.min(L1,L2);
  return (lighter + 0.05) / (darker + 0.05);
}
function randHex(){
  const v = Math.floor(Math.random()*0xFFFFFF);
  return '#' + v.toString(16).padStart(6,'0');
}
function pickContrastingPair(minRatio = 4.5){
  let a,b, attempts=0;
  do {
    a=randHex(); b=randHex(); attempts++;
    if(attempts>1000) return ['#000000','#FFFFFF'];
  } while(a.toLowerCase()===b.toLowerCase() || contrastRatio(a,b)<minRatio);
  return [a,b];
}

const numEl = document.getElementById('num');
const audio = document.getElementById('bgAudio');
const audio2 = document.getElementById('bgAudio2');
const overlay = document.getElementById('overlay');

let colorInterval;

function startChaos() {
  overlay.style.display = 'none';

  // Audio starten
  audio.play().catch(e=>console.log(e));
  audio2.play().catch(e=>console.log(e));

  // Fullscreen starten
  if (document.documentElement.requestFullscreen) {
    document.documentElement.requestFullscreen();
  } else if (document.documentElement.webkitRequestFullscreen) {
    document.documentElement.webkitRequestFullscreen();
  } else if (document.documentElement.msRequestFullscreen) {
    document.documentElement.msRequestFullscreen();
  }

  // Farben starten
  let [bgColor, fgColor] = pickContrastingPair(4.5);
  document.body.style.backgroundColor = bgColor;
  numEl.style.color = fgColor;

  const INTERVAL_MS = 20;
  colorInterval = setInterval(() => {
    let pair = pickContrastingPair(4.5);
    if(pair[0].toLowerCase()===bgColor.toLowerCase() && pair[1].toLowerCase()===fgColor.toLowerCase()){
      pair=pickContrastingPair(4.5);
    }
    bgColor = pair[0]; fgColor = pair[1];
    document.body.style.backgroundColor = bgColor;
    numEl.style.color = fgColor;
    numEl.style.textShadow = `0 0 30px ${fgColor}88, 0 8px 40px ${bgColor}88`;
  }, INTERVAL_MS);
}

// Klick auf Overlay = Chaos starten
overlay.addEventListener('click', startChaos);
</script>
</body>
</html>
